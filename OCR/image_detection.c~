#include <stdio.h>
#include <stdlib.h>
#include "opencv/highgui.h"
#include "opencv/cv.h"
#include "image_handle.h"
#include "image_detection.h"


struct 
{

}


int detect_line(IplImage *img, int *lines_number )
{

  int y,y0,y1,y2,size_lines_number = 0;
  for (y=1; y<( img->height - 1);y++)
    {
      y0 = line_value(img,y-1); // test y-1
      y1 = line_value(img,y);   // test y
      y2 = line_value(img,y+ 1); // test y+1                

      if ((y1==0 && y2==1) || (y1==0 && y0==1))
	{	
          lines_number[size_lines_number] = y;
          size_lines_number ++;
        }
    }

  for (int i = 0 ; i < size_lines_number;i++)
    {
      color_line(img,lines_number[i]);
    }

  return size_lines_number;
}


int line_value (IplImage *img,int y)
{
  int x;

  for (x = 0 ; x < img->width; x++)
    {
      // if black pixel return 1
      if (CV_IMAGE_ELEM(img,uchar,y,x) == 0)
        {
          return 1;
	}
    }                                                                 
  return 0;
}


int color_line (IplImage *img, int y)
{
  int x;
  for (x = 0 ; x < img->width; x++)
    {

      CV_IMAGE_ELEM(img,uchar,y,x)=0;
    }

  return 0;
}

int detect_char (int line_numbers[],int line_numbers_size)
{
  
  
  return 0;
}
